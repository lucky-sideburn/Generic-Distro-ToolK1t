[Unit]
Description=Jenkins Agent Service
After=network.target

[Service]
Type=simple
User={{ jenkins_user }}
Group={{ jenkins_group }}
Environment="JENKINS_AGENT_HOME={{ jenkins_agent_home }}"
ExecStart=/usr/bin/java -jar {{ jenkins_agent_jar }} -jnlpUrl {{ jenkins_master_url }}/computer/{{ jenkins_agent_name }}/jenkins-agent.jnlp -secret {{ jenkins_agent_secret }} -workDir {{ jenkins_agent_workdir }}
Restart=always

[Install]
WantedBy=multi-user.target